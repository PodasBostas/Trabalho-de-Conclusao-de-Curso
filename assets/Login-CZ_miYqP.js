import{B as w}from"./Back-Bp6Tgv2i.js";import{_ as h,c as a,a as s,w as v,b as f,d as m,v as d,t as p,e as u,o as n,r as g}from"./index-Dsej9PJs.js";const b={name:"Login",components:{Back:w},data(){return{name:"",password:"",errorName:"",errorPassword:"",apiError:""}},methods:{async submitForm(){if(this.errorName=this.name?"":"Seu nome de usuário deve ter pelo menos uma letra",this.errorPassword=this.password?"":"Senha é obrigatória",!(this.errorName||this.errorPassword))try{const o=await fetch("https://api-fad.onrender.com/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:this.name,password:this.password})});if(!o.ok){const i=await o.json();throw new Error(i.error||"Erro ao fazer login")}const e=await o.json();console.log("Resposta da API:",e),localStorage.setItem("token",e.token),this.$router.push("/overview")}catch(o){console.error("Erro na requisição:",o.message),this.apiError=o.message||"Erro ao fazer login. Tente novamente."}}}},y={class:"login-page"},_={class:"container"},k={class:"input-name"},N={key:0,class:"error"},S={class:"input-password"},B={key:1,class:"error"};function E(o,e,i,P,r,l){const c=g("Back");return n(),a("div",y,[s("div",_,[s("form",{class:"interface",onSubmit:e[2]||(e[2]=v((...t)=>l.submitForm&&l.submitForm(...t),["prevent"]))},[f(c),e[5]||(e[5]=s("h1",null,"Faça seu log in",-1)),s("div",k,[e[3]||(e[3]=s("h3",null,"Nome",-1)),m(s("input",{class:"name",type:"text",placeholder:"Insira seu nome de usuário","onUpdate:modelValue":e[0]||(e[0]=t=>r.name=t)},null,512),[[d,r.name]])]),r.errorName?(n(),a("div",N,p(r.errorName),1)):u("",!0),s("div",S,[e[4]||(e[4]=s("h3",null,"Senha",-1)),m(s("input",{class:"password",type:"password",placeholder:"Insira sua senha","onUpdate:modelValue":e[1]||(e[1]=t=>r.password=t)},null,512),[[d,r.password]])]),r.errorPassword?(n(),a("div",B,p(r.errorPassword),1)):u("",!0),e[6]||(e[6]=s("div",{class:"input-submit"},[s("input",{class:"submit",type:"submit",value:"Fazer Log in"})],-1))],32)])])}const I=h(b,[["render",E],["__scopeId","data-v-9e9111db"]]);export{I as default};
